<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Website Template with Google Sheets CMS</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f0f0f0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Website Styles */
        .site-header {
            background-color: #2196F3;
            color: white;
            padding: 60px 0;
            text-align: center;
        }

        .site-title {
            font-size: 3em;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .site-hero {
            width: 100%;
            max-width: 600px;
            height: 300px;
            object-fit: cover;
            margin: 20px auto;
            border-radius: 10px;
        }

        .site-slogan {
            font-size: 1.5em;
            margin-bottom: 20px;
            font-style: italic;
        }

        .site-intro {
            font-size: 1.1em;
            max-width: 800px;
            margin: 0 auto;
        }

        .content-section {
            background-color: white;
            padding: 40px 0;
            margin: 20px 0;
            border-radius: 10px;
        }

        .section-header {
            font-size: 2em;
            margin-bottom: 20px;
            color: #333;
            text-align: center;
        }

        .section-content {
            display: flex;
            align-items: center;
            gap: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .section-image {
            flex: 1;
            min-width: 300px;
            max-width: 500px;
            height: 250px;
            object-fit: cover;
            border-radius: 10px;
        }

        .section-text {
            flex: 1;
            min-width: 300px;
            max-width: 500px;
            font-size: 1.1em;
            line-height: 1.8;
            white-space: pre-line;
        }

        .site-footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 30px 0;
            margin-top: 40px;
        }

        .loading {
            text-align: center;
            padding: 50px;
            font-size: 1.2em;
        }

        .error {
            text-align: center;
            padding: 50px;
            color: #d32f2f;
            background-color: #ffebee;
            margin: 20px;
            border-radius: 10px;
        }

        .section-link {
            display: block;
            text-align: center;
            margin-bottom: 20px;
        }

        .section-link a {
            display: inline-block;
            background-color: #2196F3;
            color: white;
            padding: 12px 30px;
            text-decoration: none;
            border-radius: 25px;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        .section-link a:hover {
            background-color: #1976D2;
        }

        /* Demo notice */
        .demo-notice {
            background-color: #fff3cd;
            color: #856404;
            padding: 15px;
            margin: 20px auto;
            max-width: 800px;
            border-radius: 8px;
            border-left: 4px solid #ffc107;
            text-align: center;
        }

        .demo-notice h4 {
            margin-bottom: 10px;
            color: #856404;
        }

        .demo-notice a {
            color: #007bff;
            text-decoration: none;
        }

        .demo-notice a:hover {
            text-decoration: underline;
        }
    </style>
<script src="https://sites.super.myninja.ai/_assets/ninja-daytona-script.js"></script>
</head>
<body>
    <!-- Loading Message -->
    <div id="loading" class="loading">
        Loading website content from Google Sheets...
    </div>

    <!-- Error Message (hidden by default) -->
    <div id="error" class="error" style="display: none;">
        Error loading content. Please check your Google Sheet URL and make sure it's publicly accessible.
    </div>

    <!-- Website Content (populated by JavaScript) -->
    <div id="website" style="display: none;">
        <!-- Demo Notice -->
        <div class="demo-notice" id="demoNotice" style="display: none;">
            <h4>üìã Demo Mode</h4>
            <p>This is showing demo content because Google Sheets export is not configured. 
            <a href="#setup">Click here for setup instructions</a> to use your own content.</p>
        </div>

        <!-- Site Header -->
        <header class="site-header">
            <div class="container">
                <h1 class="site-title" id="siteTitle">Website Title</h1>
                <img class="site-hero" id="siteHero" src="https://via.placeholder.com/600x300/2196F3/FFFFFF?text=Your+Hero+Image" alt="Hero Image">
                <p class="site-slogan" id="siteSlogan">Your Website Slogan</p>
                <p class="site-intro" id="siteIntro">Welcome to your website! This content is loaded from Google Sheets.</p>
            </div>
        </header>

        <!-- Content Sections (populated by JavaScript) -->
        <main id="contentSections">
            <!-- Sections will be added here dynamically -->
        </main>

        <!-- Site Footer -->
        <footer class="site-footer">
            <div class="container">
                <p id="siteFooter">¬© 2024 Your Website. All rights reserved.</p>
            </div>
        </footer>

        <!-- Setup Instructions -->
        <div class="content-section" id="setup">
            <div class="container">
                <h2 class="section-header">üõ†Ô∏è Setup Instructions</h2>
                <div class="section-content" style="flex-direction: column; text-align: left;">
                    <div style="max-width: 800px; margin: 0 auto;">
                        <h3>To use your own Google Sheet content:</h3>
                        <ol style="line-height: 1.8; margin: 20px 0;">
                            <li><strong>Create a Google Sheet</strong> with two tabs: "Content" and "Styling"</li>
                            <li><strong>Content tab structure:</strong>
                                <ul style="margin: 10px 0 10px 20px;">
                                    <li>Row 1: Field labels (DO NOT DELETE)</li>
                                    <li>Row 2: Site header data</li>
                                    <li>Row 3: Empty (spacing)</li>
                                    <li>Row 4: Section field labels (DO NOT DELETE)</li>
                                    <li>Row 5+: Your content sections</li>
                                </ul>
                            </li>
                            <li><strong>Publish to web:</strong> File ‚Üí Share ‚Üí Publish to web ‚Üí Entire Document ‚Üí CSV ‚Üí Publish</li>
                            <li><strong>Update the SHEET_ID</strong> in the JavaScript code</li>
                            <li><strong>Refresh the page</strong> to load your content</li>
                        </ol>
                        
                        <h3>Current Status:</h3>
                        <p style="background: #e8f5e8; padding: 15px; border-radius: 5px; color: #2e7d32;">
                            ‚úÖ Template is working correctly<br>
                            ‚ùå Google Sheets CSV export needs configuration<br>
                            üìã Demo content is displayed as example
                        </p>
                        
                        <p style="margin-top: 20px;">
                            <a href="https://docs.google.com/spreadsheets/d/1xanlmg5nOmLs5rTFBV3P9bCVNVabNFIdF9x_ilDIx0Q/edit" 
                               target="_blank" style="color: #2196F3; font-weight: bold;">
                                View Example Google Sheet ‚Üí
                            </a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuration - Update these values
        const SHEET_ID = '2PACX-1vQk5bXrLZDv8kRuSAMn4yQFwzux46d60T_AFhfU4-ZMNyB8X-TiHapOLh0uyd-TuAURW8JiEotzT5Fn';  // Your Google Sheet ID
        const CONTENT_GID = '0';      // Content sheet
        const STYLING_GID = '2066685483';  // Styling sheet

        // Fetch CSV data
        async function fetchCSVData(gid) {
            try {
                // Try export format first
                const exportUrl = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/export?format=csv&gid=${gid}`;
                console.log(`Trying export URL: ${exportUrl}`);
                
                let response = await fetch(exportUrl);
                
                if (response.ok) {
                    const csvText = await response.text();
                    console.log('Export URL worked!');
                    return csvText;
                }
                
                // Try published format as fallback
                const publishedUrl = `https://docs.google.com/spreadsheets/d/e/${SHEET_ID}/pub?output=csv&gid=${gid}`;
                console.log(`Trying published URL: ${publishedUrl}`);
                
                response = await fetch(publishedUrl);
                if (response.ok) {
                    const csvText = await response.text();
                    console.log('Published URL worked!');
                    return csvText;
                }
                
                throw new Error('Both export and published URLs failed');
                
            } catch (error) {
                console.error('Error fetching CSV:', error);
                throw error;
            }
        }

        // Simple CSV parsing
        function parseCSV(csvText) {
            const lines = csvText.split('\n').filter(line => line.trim() !== '');
            return lines.map(line => {
                const result = [];
                let current = '';
                let inQuotes = false;
                
                for (let i = 0; i < line.length; i++) {
                    const char = line[i];
                    
                    if (char === '"') {
                        inQuotes = !inQuotes;
                    } else if (char === ',' && !inQuotes) {
                        result.push(current.trim());
                        current = '';
                    } else {
                        current += char;
                    }
                }
                
                result.push(current.trim());
                return result;
            });
        }

        // Extract data from parsed content
        function extractContentData(data) {
            try {
                // Find site header data (row with actual site data)
                let headerRow = null;
                let contentStart = -1;
                
                for (let i = 0; i < data.length; i++) {
                    if (data[i].length > 0 && data[i][0] && data[i][0].includes('Site Title')) {
                        headerRow = data[i + 1];
                    }
                    if (data[i].length > 0 && data[i][0] && data[i][0].includes('Section Header')) {
                        contentStart = i + 1;
                        break;
                    }
                }
                
                if (!headerRow) {
                    throw new Error('Could not find site header data');
                }
                
                // Extract site data
                const siteData = {
                    title: headerRow[1] || 'Website Title',
                    heroImage: headerRow[2] || '',
                    slogan: headerRow[3] || 'Your Website Slogan',
                    intro: headerRow[4] || 'Welcome to your website!',
                    footer: headerRow[5] || '¬© 2024 Your Website. All rights reserved.'
                };
                
                // Extract sections
                const sections = [];
                if (contentStart > 0) {
                    for (let i = contentStart; i < data.length; i++) {
                        const row = data[i];
                        if (row.length > 0 && row[0] && row[0].trim() !== '') {
                            sections.push({
                                header: row[0] || 'Section Title',
                                link: row[1] || '',
                                image: row[2] || '',
                                text: row[3] || ''
                            });
                        }
                    }
                }
                
                return { siteData, sections };
            } catch (error) {
                console.error('Error extracting content:', error);
                throw error;
            }
        }

        // Extract styling data
        function extractStylingData(data) {
            const defaultStyles = {
                headerBg: '#2196F3',
                headerText: '#FFFFFF',
                sectionBg: '#FFFFFF',
                sectionText: '#333333',
                footerBg: '#333333',
                footerText: '#FFFFFF'
            };
            
            try {
                if (data.length > 1) {
                    const row = data[1];
                    if (row.length >= 6) {
                        return {
                            headerBg: row[0] || defaultStyles.headerBg,
                            headerText: row[1] || defaultStyles.headerText,
                            sectionBg: row[2] || defaultStyles.sectionBg,
                            sectionText: row[3] || defaultStyles.sectionText,
                            footerBg: row[4] || defaultStyles.footerBg,
                            footerText: row[5] || defaultStyles.footerText
                        };
                    }
                }
            } catch (error) {
                console.error('Error extracting styling:', error);
            }
            
            return defaultStyles;
        }

        // Apply styling
        function applyStyling(styles) {
            document.body.style.backgroundColor = styles.sectionBg;
            document.querySelector('.site-header').style.backgroundColor = styles.headerBg;
            document.querySelector('.site-header').style.color = styles.headerText;
            
            const sections = document.querySelectorAll('.content-section');
            sections.forEach(section => {
                section.style.backgroundColor = styles.sectionBg;
                section.style.color = styles.sectionText;
            });
            
            document.querySelector('.site-footer').style.backgroundColor = styles.footerBg;
            document.querySelector('.site-footer').style.color = styles.footerText;
        }

        // Populate website
        function populateWebsite(siteData, sections) {
            // Update header
            document.getElementById('siteTitle').textContent = siteData.title;
            
            const heroImg = document.getElementById('siteHero');
            if (siteData.heroImage) {
                heroImg.src = siteData.heroImage;
            }
            
            document.getElementById('siteSlogan').textContent = siteData.slogan;
            document.getElementById('siteIntro').textContent = siteData.intro;
            document.getElementById('siteFooter').textContent = siteData.footer;
            
            // Add sections
            const contentSections = document.getElementById('contentSections');
            contentSections.innerHTML = '';
            
            sections.forEach(section => {
                const sectionDiv = document.createElement('div');
                sectionDiv.className = 'content-section';
                
                let sectionHTML = '<div class="container">';
                
                if (section.link && section.link.trim() !== '') {
                    sectionHTML += `
                        <div class="section-link">
                            <a href="${section.link}" target="_blank">Learn More</a>
                        </div>
                    `;
                }
                
                sectionHTML += `<h2 class="section-header">${section.header}</h2><div class="section-content">`;
                
                if (section.image && section.image.trim() !== '') {
                    sectionHTML += `<img class="section-image" src="${section.image}" alt="${section.header}">`;
                }
                
                if (section.text && section.text.trim() !== '') {
                    sectionHTML += `<div class="section-text">${section.text}</div>`;
                }
                
                sectionHTML += '</div></div>';
                sectionDiv.innerHTML = sectionHTML;
                contentSections.appendChild(sectionDiv);
            });
        }

        // Load demo content
        function loadDemoContent() {
            const demoSiteData = {
                title: 'Free Website Template',
                heroImage: 'https://picsum.photos/seed/template/600/300.jpg',
                slogan: 'Build websites with Google Sheets CMS',
                intro: 'This template allows you to create beautiful websites using Google Sheets as your content management system. Update your content instantly without any coding!',
                footer: '¬© 2024 Free Website Template. Built with Google Sheets CMS.'
            };
            
            const demoSections = [
                {
                    header: 'Easy Content Management',
                    link: 'https://docs.google.com/spreadsheets',
                    image: 'https://picsum.photos/seed/cms/500/250.jpg',
                    text: 'Simply edit your Google Sheet and watch your website update automatically. No coding required, no complex dashboard - just the familiar Google Sheets interface.'
                },
                {
                    header: 'Professional Design',
                    link: '',
                    image: 'https://picsum.photos/seed/design/500/250.jpg',
                    text: 'Modern, responsive design that looks great on all devices. Clean typography, smooth interactions, and professional styling built right in.'
                },
                {
                    header: 'Get Started Today',
                    link: 'https://github.com',
                    image: 'https://picsum.photos/seed/start/500/250.jpg',
                    text: 'Ready to build your website? Follow the setup instructions below to configure your Google Sheet and start managing your content with ease.'
                }
            ];
            
            const demoStyles = {
                headerBg: '#2196F3',
                headerText: '#FFFFFF',
                sectionBg: '#FFFFFF',
                sectionText: '#333333',
                footerBg: '#333333',
                footerText: '#FFFFFF'
            };
            
            applyStyling(demoStyles);
            populateWebsite(demoSiteData, demoSections);
            
            // Show demo notice
            document.getElementById('demoNotice').style.display = 'block';
        }

        // Main function
        async function loadWebsite() {
            try {
                document.getElementById('loading').style.display = 'block';
                document.getElementById('error').style.display = 'none';
                document.getElementById('website').style.display = 'none';
                
                // Try to load from Google Sheets
                const contentCSV = await fetchCSVData(CONTENT_GID);
                const contentData = parseCSV(contentCSV);
                const { siteData, sections } = extractContentData(contentData);
                
                const stylingCSV = await fetchCSVData(STYLING_GID);
                const stylingData = parseCSV(stylingCSV);
                const styles = extractStylingData(stylingData);
                
                applyStyling(styles);
                populateWebsite(siteData, sections);
                
                document.getElementById('loading').style.display = 'none';
                document.getElementById('website').style.display = 'block';
                
            } catch (error) {
                console.error('Failed to load from Google Sheets:', error);
                // Load demo content as fallback
                loadDemoContent();
                document.getElementById('loading').style.display = 'none';
                document.getElementById('website').style.display = 'block';
            }
        }

        // Load when page loads
        document.addEventListener('DOMContentLoaded', loadWebsite);
    </script>
</body>
</html>
